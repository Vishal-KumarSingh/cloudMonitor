
{% extends "index.html" %}
{% block page %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ace-builds@1.35.1/css/ace.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />


<h1>You are editing : {{path}}</h1>
<div class="flex justify-between">
   <div>
    <span class="material-symbols-outlined" onclick="saveFile()">
      save
    </span>
    <span class="material-symbols-outlined">
      restart_alt
    </span>
  </div>
 
</div>
<div id="editor" style="height: 500px; width: 100%;">{{data}}</div>


<script src="https://cdn.jsdelivr.net/npm/ace-builds/src/ace.js" type="text/javascript" charset="utf-8"></script>


<script>
  var element = document.getElementById("editor");
  ace.edit(element, {
    mode: "ace/mode/javascript",
    selectionStyle: "text"
})
function saveFile(){
  console.log("save file")
  var data = ace.edit(element).getValue().trim()
  console.log(data)
  fetchData("{% url 'saveFile' %}", {data: data , path: "{{path}}"}, (data) => {
    console.log(data);
  });

    
}
</script>
{% endblock %}

